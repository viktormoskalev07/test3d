/*!
 * Start Bootstrap - New Age v5.0.1 (https://startbootstrap.com/template-overviews/new-age)
 * Copyright 2013-2021 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-new-age/blob/master/LICENSE)
 */

!function(){"use strict";var r=!1,e=new IntersectionObserver(function(e,a){e.forEach(function(e){0<e.intersectionRatio&&(r||(function(){let r=document.createElement("div");r.classList.add("slides"),l.forEach((e,a)=>{let t=document.createElement("div");t.classList.add("slide"),t.innerHTML=`
        <div class="card">
          <div class="card-img-top">
            <video id="tl-${e.id}" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto" poster="${e.p_json_url.replace("json","poster.jpg")}" data-setup='{"fluid": true, "playbackRates": [0.5, 1, 1.5, 2], "controlBar": {"fullscreenToggle": false}}'>
              <source src="${e.p_json_url.replace(".json","")}" type='video/mp4'>
              <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
            </video>
          </div>
          <div class="card-body">
          <div id="alert-banner-${e.id}" class="bg-warning alert-banner text-center">
            Possible failure detected!
          </div>
          <div class="text-center gauge">
            <canvas id="gauge-${e.id}" data-type="radial-gauge" data-value-dec="0" data-value-int="0" data-width="240" data-height="240" data-units="false" data-title="Looking Good" data-value-box="false" data-min-value="0" data-max-value="100" data-major-ticks='["","","",""]' data-minor-ticks="4" data-highlights='[{ "from": 0, "to": 33, "color": "#5cb85c" },{ "from": 33, "to": 67, "color": "#f0ad4e" },{ "from": 67, "to": 100, "color": "#d9534f" }]' data-color-plate="rgba(255,255,255,.0)" data-color-title="#5cb85c" data-color-stroke-ticks="#EBEBEB" data-color-numbers="#eee" data-color-needle-start="rgba(240, 128, 128, 1)" data-color-needle-end="rgba(255, 160, 122, .9)" data-value-box="true" data-animation-rule="bounce" data-animation-duration="500" data-animated-value="true" data-start-angle="90" data-ticks-angle="180" data-borders="false"></canvas>
          </div>
          </div>
        </div>
      `,r.append(t)}),document.getElementById("gallerySlider").querySelector(".slides-wrapper").append(r)}(),r=!0),function(){let e=document.getElementById("gallery");var a=document.createElement("link");a.rel="stylesheet",a.href="https://vjs.zencdn.net/7.4.1/video-js.css";var t=document.createElement("script");t.defer=!0,t.src="https://cdn.rawgit.com/Mikhus/canvas-gauges/gh-pages/download/2.1.5/all/gauge.min.js",e.appendChild(a),e.appendChild(t)}(),function(){function i(e,a){var t,a=(t=.45)<(a=a)?100/3/.55*(a-t)+200/3:148.14814814814815*a;e.attr("data-value",a),66<a?(e.attr("data-title","Failing!"),e.attr("data-color-title","rgba(255,30,0,.75)")):33<a?(e.attr("data-title","Fishy..."),e.attr("data-color-title","rgb(255,165,0,.75)")):(e.attr("data-title","Looking Good"),e.attr("data-color-title","rgba(0,255,30,.75)"))}for(var e=0;e<l.length;e++)!function(){var d=l[e];$.ajax({type:"GET",url:d.p_json_url,dataType:"json",crossDomain:!0,success:function(t){var r,l,o;$("#tl-"+d.id).length<1||(r=$("#gauge-"+d.id),l=videojs("tl-"+d.id),o=$("#alert-banner-"+d.id),l.on("timeupdate",function(e){var a=Math.floor(25*this.currentTime()),a=t[a].p;i(r,a),.45<a?o.show():o.hide()}),$("#fullscreen-btn-"+d.id).click(function(){l.pause();var e=l.currentTime();$("#tl-modal-title").text("By "+d.creator_name);var a=videojs("tl-fullscreen-vjs");a.src(d.video_url),a.currentTime(e),a.play(),a.on("timeupdate",function(e){var a=Math.floor(25*this.currentTime()),a=t[a].p;i($("#gauge-fullscreen"),a)})}))}})}();$("#tl-fullscreen-modal").on("hide.bs.modal",function(e){videojs("tl-fullscreen-vjs").pause()})}(),a.unobserve(e.target))});let t=new Slider("gallery");t.init()},{root:null,rootMargin:"0px",threshold:.1}),l=JSON.parse($("#timelapses-data").text()),a=document.querySelector(".gallery");e.observe(a)}();